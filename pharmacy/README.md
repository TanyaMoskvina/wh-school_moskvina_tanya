
## Схема `pharmacy`

### Таблицы

1. `goods`    - таблица товаров
    * `by_prescription = TRUE ` - отпускается по рецепту, возможен только самомывоз


2. `goods_on_place` - таблица с местами хранения товаров и их количеством 
3. `places`   - таблица содержит места хранения
4. `prices`   - таблица актуальных цен
5. `sales`    - таблица продаж
   - `client_id` - если `is_delivery = TRUE` должен быть заполнен
   - `goods` - содержит проданные/заказанные товары и их количество  
   ```json
   {
     "data": [
       {
         "nm_id": 1,
         "quantity": 1
       },
       {
         "nm_id": 2,
         "quantity": 3
       }
     ]
   }
   ```
   - `is_delivery` TRUE - доставка, FALSE - самовывоз/оффлайн покупка
   - `delivery_info` JSONB  
   если `is_delivery = TRUE`, должен содержать адресс доставки, может также содержать комментарий клиента
    ```josn
    {
      "data": [
        {
          "address": "адрес доставки",
          "comment": ""
        }
      ]
    }
    ```
   - `status`
      * `EXP` - expect - оформлен и ожидает сборки
      * `INP` - in process - в процессе сборки
      * `RDY` - ready - готов к получению/доставке
      * `DEL` - delivery - в доставке
      * `CNL` - cancelled - отменен  
        (отказаться от заказа можно в момент получения, если с ним что-то не так)
      * `FIN` - finished - доставлен/получен  
     продажа через кассу - сразу статус `FIN`  
     


6. `supplies` - таблица поставок
7. `supply_orders` - таблица с заказами поставок 
   * `order_info` - позиции заказа и их количество - JSONB - 
   ```json
   {
     "data": [
       {
         "nm_id": 1,
         "quantity": 1
       },
       {
         "nm_id": 2,
         "quantity": 3
       }
     ]
   }
   ```
