# Схема `dictionary`

## Таблицы

1. `card_level` - уровни скидочных карт
   * `discount` - скидки в процентах
   * `amount_spent` - сумма, которую нужно потратить для перехода на следующий уровень  

2. `goods_category` - категории товаров
3. `manufacturers` - производители
4. `place_types` - типы мест хранения
5. `ranks` - должности и зарплаты
6. `release_forms` - форма выпуска лекарств
7. `suppliers` - поставщики
8. `goods`    - таблица товаров
    * `by_prescription = TRUE ` - отпускается по рецепту, возможен только самомывоз

## Функции

### Заполнение и обновление таблицы ranks
```sql
SELECT dictionary.ranks_upd('
                            {
                              "name": "Директор",
                              "salary": 150000
                            }');
```
При вводе существующего `rank_id` запись о должности обновится.  
При `rank_id` NULL добавится новая запись.  
Пример ответа при правильном выполнении:
```jsonb
{"data" : null}
```
Пример ошибки:
```jsonb
{
  "errors": [
    {
      "error": "dictionary.ranks_upd.name_exists",
      "detail": "name = Директор",
      "message": "Такая должность уже существует"
    }
  ]
}
```